#!/usr/bin/env node

var program = require('commander');
var fs = require('fs');
var path = require('path');

var compile = require('./compile'),
    serve   = require('./serve'),
    render  = require('./render');

program
  .command('compile [project]')
  .description('Compile the nin project')
  .action(function(project){
    project = path.resolve(process.cwd(), project || '');
    console.log('compiling project');
    compile.compile(project);
  });

program
  .command('render [project]')
  .description('Renders the nin project. At this point, this assumes ' + 
               'you have already generated png frames, and simply need ' +
               'to stitch them together.' )
  .action(function(project){
    project = path.resolve(process.cwd(), project || '');
    console.log('rendering project');
    render.render(project);
  });

program
  .command('run [project]')
  .description('Run the backend project')
  .action(function(project) {
    project = path.resolve(process.cwd(), project || '');
    serve.serve(project);
  });

program.parse(process.argv);
